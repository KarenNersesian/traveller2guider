(function(n){function u(n){return typeof n=="undefined"?!1:n instanceof Array||!(n instanceof Object)&&Object.prototype.toString.call(n)=="[object Array]"||typeof n.length=="number"&&typeof n.splice!="undefined"&&typeof n.propertyIsEnumerable!="undefined"&&!n.propertyIsEnumerable("splice")?!0:!1}function t(){return this.init.apply(this,arguments)}function r(){Draggable.apply(this,arguments)}n.slider=function(i,r){var u=n(i);return u.data("jslider")||u.data("jslider",new t(i,r)),u.data("jslider")};n.fn.slider=function(t,i){function o(n){return n!==undefined}function e(n){return n!=null}var f,r=arguments;return this.each(function(){var h=n.slider(this,t),s,l,c;if(typeof t=="string")switch(t){case"value":o(r[1])&&o(r[2])?(s=h.getPointers(),e(s[0])&&e(r[1])&&(s[0].set(r[1]),s[0].setIndexOver()),e(s[1])&&e(r[2])&&(s[1].set(r[2]),s[1].setIndexOver())):o(r[1])?(s=h.getPointers(),e(s[0])&&e(r[1])&&(s[0].set(r[1]),s[0].setIndexOver())):f=h.getValue();break;case"prc":o(r[1])&&o(r[2])?(s=h.getPointers(),e(s[0])&&e(r[1])&&(s[0]._set(r[1]),s[0].setIndexOver()),e(s[1])&&e(r[2])&&(s[1]._set(r[2]),s[1].setIndexOver())):o(r[1])?(s=h.getPointers(),e(s[0])&&e(r[1])&&(s[0]._set(r[1]),s[0].setIndexOver())):f=h.getPrcValue();break;case"calculatedValue":for(l=h.getValue().split(";"),f="",c=0;c<l.length;c++)f+=(c>0?";":"")+h.nice(l[c]);break;case"skin":h.setSkin(r[1])}else t||i||(u(f)||(f=[]),f.push(h))}),u(f)&&f.length==1&&(f=f[0]),f||this};var i={settings:{from:1,to:10,step:1,smooth:!0,limits:!0,round:0,format:{format:"#,##0.##"},value:"5;7",dimension:""},className:"jslider",selector:".jslider-",template:tmpl('<span class="<%=className%>">'+"<table><tr><td>"+'<div class="<%=className%>-bg">'+'<i class="l"><\/i><i class="f"><\/i><i class="r"><\/i><i class="v"><\/i><\/div>'+'<div class="<%=className%>-pointer"><\/div>'+'<div class="<%=className%>-pointer <%=className%>-pointer-to"><\/div>'+'<div class="<%=className%>-label"><span><%=settings.from%><\/span><\/div>'+'<div class="<%=className%>-label <%=className%>-label-to"><span><%=settings.to%><\/span><%=settings.dimension%><\/div>'+'<div class="<%=className%>-value"><span><\/span><%=settings.dimension%><\/div>'+'<div class="<%=className%>-value <%=className%>-value-to"><span><\/span><%=settings.dimension%><\/div>'+'<div class="<%=className%>-scale"><%=scale%><\/div>'+"<\/td><\/tr><\/table><\/span>")};t.prototype.init=function(t,r){this.settings=n.extend(!0,{},i.settings,r?r:{});this.inputNode=n(t).hide();this.settings.interval=this.settings.to-this.settings.from;this.settings.value=this.inputNode.attr("value");this.settings.calculate&&n.isFunction(this.settings.calculate)&&(this.nice=this.settings.calculate);this.settings.onstatechange&&n.isFunction(this.settings.onstatechange)&&(this.onstatechange=this.settings.onstatechange);this.is={init:!1};this.o={};this.create()};t.prototype.onstatechange=function(){};t.prototype.create=function(){var t=this;this.domNode=n(i.template({className:i.className,settings:{from:this.nice(this.settings.from),to:this.nice(this.settings.to),dimension:this.settings.dimension},scale:this.generateScale()}));this.inputNode.after(this.domNode);this.drawScale();this.settings.skin&&this.settings.skin.length>0&&this.setSkin(this.settings.skin);this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()};n.extend(this.o,{pointers:{},labels:{0:{o:this.domNode.find(i.selector+"value").not(i.selector+"value-to")},1:{o:this.domNode.find(i.selector+"value").filter(i.selector+"value-to")}},limits:{0:this.domNode.find(i.selector+"label").not(i.selector+"label-to"),1:this.domNode.find(i.selector+"label").filter(i.selector+"label-to")}});n.extend(this.o.labels[0],{value:this.o.labels[0].o.find("span")});n.extend(this.o.labels[1],{value:this.o.labels[1].o.find("span")});t.settings.value.split(";")[1]||(this.settings.single=!0,this.domNode.addDependClass("single"));t.settings.limits||this.domNode.addDependClass("limitless");this.domNode.find(i.selector+"pointer").each(function(n){var i=t.settings.value.split(";")[n],u;i&&(t.o.pointers[n]=new r(this,n,t),u=t.settings.value.split(";")[n-1],u&&new Number(i)<new Number(u)&&(i=u),i=i<t.settings.from?t.settings.from:i,i=i>t.settings.to?t.settings.to:i,t.o.pointers[n].set(i,!0))});this.o.value=this.domNode.find(".v");this.is.init=!0;n.each(this.o.pointers,function(){t.redraw(this)}),function(t){n(window).resize(function(){t.onresize()})}(this)};t.prototype.setSkin=function(n){this.skin_&&this.domNode.removeDependClass(this.skin_,"_");this.domNode.addDependClass(this.skin_=n,"_")};t.prototype.setPointersIndex=function(){n.each(this.getPointers(),function(n){this.index(n)})};t.prototype.getPointers=function(){return this.o.pointers};t.prototype.generateScale=function(){var n;if(this.settings.scale&&this.settings.scale.length>0){var i="",t=this.settings.scale,r=Math.round(1e3/(t.length-1))/10;for(n=0;n<t.length;n++)i+='<span style="left: '+n*r+'%">'+(t[n]!="|"?"<ins>"+t[n]+"<\/ins>":"")+"<\/span>";return i}return""};t.prototype.drawScale=function(){this.domNode.find(i.selector+"scale span ins").each(function(){n(this).css({marginLeft:-n(this).outerWidth()/2})})};t.prototype.onresize=function(){var t=this;this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()};n.each(this.o.pointers,function(){t.redraw(this)})};t.prototype.update=function(){this.onresize();this.drawScale()};t.prototype.limits=function(n,t){var r,i;return this.settings.smooth||(r=this.settings.step*100/this.settings.interval,n=Math.round(n/r)*r),i=this.o.pointers[1-t.uid],i&&t.uid&&n<i.value.prc&&(n=i.value.prc),i&&!t.uid&&n>i.value.prc&&(n=i.value.prc),n<0&&(n=0),n>100&&(n=100),Math.round(n*10)/10};t.prototype.redraw=function(n){if(!this.is.init)return!1;this.setValue();this.o.pointers[0]&&this.o.pointers[1]&&this.o.value.css({left:this.o.pointers[0].value.prc+"%",width:this.o.pointers[1].value.prc-this.o.pointers[0].value.prc+"%"});this.o.labels[n.uid].value.html(this.nice(n.value.origin));this.redrawLabels(n)};t.prototype.redrawLabels=function(n){function e(n,t,i){return t.margin=-t.label/2,label_left=t.border+t.margin,label_left<0&&(t.margin-=label_left),t.border+t.label/2>o.sizes.domWidth?(t.margin=0,t.right=!0):t.right=!1,n.o.css({left:i+"%",marginLeft:t.margin,right:"auto"}),t.right&&n.o.css({left:"auto",right:0}),t}var o=this,f=this.o.labels[n.uid],u=n.value.prc,t={label:f.o.outerWidth(),right:!1,border:u*this.sizes.domWidth/100},i,r;if(!this.settings.single){i=this.o.pointers[1-n.uid];r=this.o.labels[i.uid];switch(n.uid){case 0:t.border+t.label/2>r.o.offset().left-this.sizes.domOffset.left?(r.o.css({visibility:"hidden"}),r.value.html(this.nice(i.value.origin)),f.o.css({visibility:"visible"}),u=(i.value.prc-u)/2+u,i.value.prc!=n.value.prc&&(f.value.html(this.nice(n.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(i.value.origin)),t.label=f.o.outerWidth(),t.border=u*this.sizes.domWidth/100)):r.o.css({visibility:"visible"});break;case 1:t.border-t.label/2<r.o.offset().left-this.sizes.domOffset.left+r.o.outerWidth()?(r.o.css({visibility:"hidden"}),r.value.html(this.nice(i.value.origin)),f.o.css({visibility:"visible"}),u=(u-i.value.prc)/2+i.value.prc,i.value.prc!=n.value.prc&&(f.value.html(this.nice(i.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(n.value.origin)),t.label=f.o.outerWidth(),t.border=u*this.sizes.domWidth/100)):r.o.css({visibility:"visible"})}}t=e(f,t,u);r&&(t={label:r.o.outerWidth(),right:!1,border:i.value.prc*this.sizes.domWidth/100},t=e(r,t,i.value.prc));this.redrawLimits()};t.prototype.redrawLimits=function(){var t,i,n;if(this.settings.limits){t=[!0,!0];for(key in this.o.pointers)if(!this.settings.single||key==0){var f=this.o.pointers[key],r=this.o.labels[f.uid],u=r.o.offset().left-this.sizes.domOffset.left,i=this.o.limits[0];u<i.outerWidth()&&(t[0]=!1);i=this.o.limits[1];u+r.o.outerWidth()>this.sizes.domWidth-i.outerWidth()&&(t[1]=!1)}for(n=0;n<t.length;n++)t[n]?this.o.limits[n].fadeIn("fast"):this.o.limits[n].fadeOut("fast")}};t.prototype.setValue=function(){var n=this.getValue();this.inputNode.attr("value",n);this.onstatechange.call(this,n)};t.prototype.getValue=function(){if(!this.is.init)return!1;var i=this,t="";return n.each(this.o.pointers,function(n){this.value.prc==undefined||isNaN(this.value.prc)||(t+=(n>0?";":"")+i.prcToValue(this.value.prc))}),t};t.prototype.getPrcValue=function(){if(!this.is.init)return!1;var i=this,t="";return n.each(this.o.pointers,function(n){this.value.prc==undefined||isNaN(this.value.prc)||(t+=(n>0?";":"")+this.value.prc)}),t};t.prototype.prcToValue=function(n){var i,t,e;if(this.settings.heterogeneity&&this.settings.heterogeneity.length>0){var u=this.settings.heterogeneity,r=0,f=this.settings.from;for(i=0;i<=u.length;i++)t=u[i]?u[i].split("/"):[100,this.settings.to],t[0]=new Number(t[0]),t[1]=new Number(t[1]),n>=r&&n<=t[0]&&(e=f+(n-r)*(t[1]-f)/(t[0]-r)),r=t[0],f=t[1]}else e=this.settings.from+n*this.settings.interval/100;return this.round(e)};t.prototype.valueToPrc=function(n,t){var r,i,o;if(this.settings.heterogeneity&&this.settings.heterogeneity.length>0){var f=this.settings.heterogeneity,e=0,u=this.settings.from;for(r=0;r<=f.length;r++)i=f[r]?f[r].split("/"):[100,this.settings.to],i[0]=new Number(i[0]),i[1]=new Number(i[1]),n>=u&&n<=i[1]&&(o=t.limits(e+(n-u)*(i[0]-e)/(i[1]-u))),e=i[0],u=i[1]}else o=t.limits((n-this.settings.from)*100/this.settings.interval);return o};t.prototype.round=function(n){return n=Math.round(n/this.settings.step)*this.settings.step,this.settings.round?Math.round(n*Math.pow(10,this.settings.round))/Math.pow(10,this.settings.round):Math.round(n)};t.prototype.nice=function(t){return t=t.toString().replace(/,/gi,".").replace(/ /gi,""),n.formatNumber?n.formatNumber(new Number(t),this.settings.format||{}).replace(/-/gi,"&minus;"):new Number(t)};r.prototype=new Draggable;r.prototype.oninit=function(n,t,i){this.uid=t;this.parent=i;this.value={};this.settings=this.parent.settings};r.prototype.onmousedown=function(){this._parent={offset:this.parent.domNode.offset(),width:this.parent.domNode.width()};this.ptr.addDependClass("hover");this.setIndexOver()};r.prototype.onmousemove=function(n){var t=this._getPageCoords(n);this._set(this.calc(t.x))};r.prototype.onmouseup=function(){this.parent.settings.callback&&n.isFunction(this.parent.settings.callback)&&this.parent.settings.callback.call(this.parent,this.parent.getValue());this.ptr.removeDependClass("hover")};r.prototype.setIndexOver=function(){this.parent.setPointersIndex(1);this.index(2)};r.prototype.index=function(n){this.ptr.css({zIndex:n})};r.prototype.limits=function(n){return this.parent.limits(n,this)};r.prototype.calc=function(n){return this.limits((n-this._parent.offset.left)*100/this._parent.width)};r.prototype.set=function(n,t){this.value.origin=this.parent.round(n);this._set(this.parent.valueToPrc(n,this),t)};r.prototype._set=function(n,t){t||(this.value.origin=this.parent.prcToValue(n));this.value.prc=n;this.ptr.css({left:n+"%"});this.parent.redraw(this)}})(jQuery);
//# sourceMappingURL=jquery.slider.min.js.map
